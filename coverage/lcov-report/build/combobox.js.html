<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for build/combobox.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">build/</a> combobox.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">18.89% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>17/90</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">12.77% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>6/47</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">37.5% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>3/8</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">18.18% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>16/88</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232</td><td class="line-coverage quiet"><span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">(function (global, factory) {
  typeof exports === 'object' &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >typeof module !== 'undefined' </span>? <span class="branch-0 cbranch-no" title="branch not covered" >factory(exports) </span>: typeof define === 'function' &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >define.amd </span>? <span class="branch-0 cbranch-no" title="branch not covered" >define(['exports'], factory) </span>: factory(global.a11yEnhancer = global.a11yEnhancer || <span class="branch-1 cbranch-no" title="branch not covered" >{})</span>;
})(this, function (exports) {
  'use strict';
&nbsp;
  /**
   * CustomEvent polyfill.
   */
&nbsp;
  var CustomEvent = function () {
    <span class="missing-if-branch" title="else path not taken" >E</span>if (typeof window.CustomEvent === "function") return window.CustomEvent;
&nbsp;
<span class="fstat-no" title="function not covered" >    function CustomEvent(event, params) {</span>
<span class="cstat-no" title="statement not covered" >      params = params || { bubbles: false, cancelable: false, detail: undefined };</span>
<span class="cstat-no" title="statement not covered" >      var evt = document.createEvent('CustomEvent');</span>
<span class="cstat-no" title="statement not covered" >      evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);</span>
<span class="cstat-no" title="statement not covered" >      return evt;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    CustomEvent.prototype = window.Event.prototype;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return CustomEvent;</span>
  }();
&nbsp;
  /**
   * Define commonly used keycodes for interacting with components.
   */
&nbsp;
  var up = 38;
&nbsp;
  var down = 40;
&nbsp;
  var LISTBOX_ID = 'ae_combobox-listbox';
  var OPTIONS_ID = 'ae_combobox-option';
&nbsp;
  // unique id for each listbox and option
  var listboxUid = 1;
  var optionUid = 1;
&nbsp;
  /**
   * Implements an accessible auto complete combo box with proper state and focus support
   * (a combo box that does not support auto complete should just use the &lt;select&gt; element).
   * @see https://www.w3.org/TR/wai-aria-practices-1.1/#combobox
   *
   * @param {HTMLElement} element - Container element of the combo box.
   * @param {ShadowRoot} [shadowRoot=element] - Shadow root element if using a custom element with shadow root. Defaults to the container element.
   *
   * For this to work, the input that controls the dropdown list must be given the
   * role="combobox" and the dropdown menu must be given the role="listbox". From this,
   * the code will assume that every direct child of the listbox is an option.
   *
   * By default, the combo box is an auto complete combo box. This means that the
   * list of choices should filter based on what the user types. By default, as the
   * user navigates through the list of choices the text field will not auto populate
   * with the selected option (e.g. Twitter or Dropbox search field).
   *
   * Optional attributes on container element
   *
   *    autocomplete="inline" - As the user navigates through the list of choices the
   *                            text field will auto populate with the selected option
   *                            (e.g. the address bar of a browser).
   *    autocomplete="both" - Combines both the list and inline auto complete options
   *    wrap-focus - wraps the option selection when on the first/last option
   *
   * Events will pass the target element as the detail property of the event
   *
   *    combobox-expanded - fired when the listbox is expanded
   *    combobox-collapsed - fired when the listbox is collapsed
   *    combobox-option-focused - fired when a listbox option is focused
   *    combobox-option-blurred - fired when a listbox option is blurred
   *    combobox-option-selected - fired when a listbox option is selected
   */
<span class="fstat-no" title="function not covered" >  function combobox(element, shadowRoot) {</span>
    // ensure we are a DOM element and have proper element functions
<span class="cstat-no" title="statement not covered" >    if (!element instanceof HTMLElement) <span class="cstat-no" title="statement not covered" >return;</span></span>
&nbsp;
    // if no shadowRoot is passed default to the container element
    // using toString() is the only safe way to check for a shadow root node when
    // the polyfill is not loaded
<span class="cstat-no" title="statement not covered" >    var root = shadowRoot &amp;&amp; shadowRoot.toString() === '[object ShadowRoot]' ? shadowRoot : element;</span>
&nbsp;
    // states
<span class="cstat-no" title="statement not covered" >    var currentOptionIndex = 0;</span>
<span class="cstat-no" title="statement not covered" >    var currentOption = void 0,</span>
        lastOptionIndex = void 0;
&nbsp;
    // valid option values
<span class="cstat-no" title="statement not covered" >    var VALID_VALUES = {</span>
      autocomplete: ['list', 'inline', 'both']
    };
&nbsp;
    // options
<span class="cstat-no" title="statement not covered" >    var OPTIONS = {</span>
      autocomplete: element.getAttribute('autocomplete'),
      wrapFocus: element.hasAttribute('wrap-focus')
    };
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (VALID_VALUES.autocomplete.indexOf(OPTIONS.autocomplete) === -1) {</span>
<span class="cstat-no" title="statement not covered" >      OPTIONS.autocomplete = VALID_VALUES.autocomplete[0];</span>
    }
&nbsp;
    // add role and state for the combobox (input field)
<span class="cstat-no" title="statement not covered" >    var combobox = root.querySelector('[role="combobox"]');</span>
<span class="cstat-no" title="statement not covered" >    combobox.setAttribute('aria-activedescendant', OPTIONS_ID + optionUid);</span>
<span class="cstat-no" title="statement not covered" >    combobox.setAttribute('aria-autocomplete', OPTIONS.autocomplete);</span>
<span class="cstat-no" title="statement not covered" >    combobox.setAttribute('aria-expanded', false);</span>
<span class="cstat-no" title="statement not covered" >    combobox.setAttribute('aria-owns', LISTBOX_ID + listboxUid);</span>
<span class="cstat-no" title="statement not covered" >    combobox.setAttribute('aria-controls', LISTBOX_ID + listboxUid);</span>
&nbsp;
    // set role and state for the listbox (list of choices)
<span class="cstat-no" title="statement not covered" >    var listbox = root.querySelector('[role="listbox"]');</span>
<span class="cstat-no" title="statement not covered" >    listbox.setAttribute('aria-hidden', true);</span>
<span class="cstat-no" title="statement not covered" >    listbox.setAttribute('id', LISTBOX_ID + listboxUid);</span>
&nbsp;
    // set role and state for each option
<span class="cstat-no" title="statement not covered" >    var options = Array.from(listbox.children);</span>
<span class="cstat-no" title="statement not covered" >    for (var i = 0, option; option = options[i]; i++) {</span>
<span class="cstat-no" title="statement not covered" >      option.setAttribute('aria-selected', false);</span>
<span class="cstat-no" title="statement not covered" >      option.setAttribute('id', OPTIONS_ID + (optionUid + i));</span>
<span class="cstat-no" title="statement not covered" >      option.setAttribute('role', 'option');</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    listboxUid++;</span>
<span class="cstat-no" title="statement not covered" >    optionUid += options.length;</span>
<span class="cstat-no" title="statement not covered" >    currentOption = options[0];</span>
&nbsp;
    // if focus wraps, the text field becomes a focusable option
<span class="cstat-no" title="statement not covered" >    if (OPTIONS.wrapFocus) {</span>
<span class="cstat-no" title="statement not covered" >      options.unshift(combobox);</span>
<span class="cstat-no" title="statement not covered" >      currentOptionIndex = 1; </span>// initial focus should be first option in the list
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    lastOptionIndex = options.length - 1;</span>
&nbsp;
    // keyboard events
<span class="cstat-no" title="statement not covered" >    root.addEventListener('keydown', <span class="fstat-no" title="function not covered" >function (e) {</span></span>
&nbsp;
      // alt + up/down arrow - open listbox
<span class="cstat-no" title="statement not covered" >      if (e.altKey &amp;&amp; (e.which === up || e.which === down)) {</span>
<span class="cstat-no" title="statement not covered" >        e.preventDefault();</span>
<span class="cstat-no" title="statement not covered" >        toggleListbox();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        return;</span>
      }
&nbsp;
      // remaining combobox keyboard interactions can only happen when the listbox is opened
<span class="cstat-no" title="statement not covered" >      if (combobox.getAttribute('aria-expanded') === 'true') {</span>
<span class="cstat-no" title="statement not covered" >        switch (e.which) {</span>
&nbsp;
          // up arrow - move focus to previous option
          case up:
<span class="cstat-no" title="statement not covered" >            e.preventDefault();</span>
&nbsp;
            // optionally wrap focus
<span class="cstat-no" title="statement not covered" >            if (OPTIONS.wrapFocus) {</span>
<span class="cstat-no" title="statement not covered" >              currentOptionIndex = currentOptionIndex === 0 ? lastOptionIndex : currentOptionIndex - 1;</span>
            } else {
<span class="cstat-no" title="statement not covered" >              currentOptionIndex = currentOptionIndex === 0 ? 0 : currentOptionIndex - 1;</span>
            }
&nbsp;
<span class="cstat-no" title="statement not covered" >            updateFocusState();</span>
<span class="cstat-no" title="statement not covered" >            break;</span>
&nbsp;
          // down arrow - move focus to next option
          case down:
<span class="cstat-no" title="statement not covered" >            e.preventDefault();</span>
&nbsp;
            // optionally wrap focus
<span class="cstat-no" title="statement not covered" >            if (OPTIONS.wrapFocus) {</span>
<span class="cstat-no" title="statement not covered" >              currentOptionIndex = currentOptionIndex === lastOptionIndex ? 0 : currentOptionIndex + 1;</span>
            } else {
<span class="cstat-no" title="statement not covered" >              currentOptionIndex = currentOptionIndex === lastOptionIndex ? lastOptionIndex : currentOptionIndex + 1;</span>
            }
&nbsp;
<span class="cstat-no" title="statement not covered" >            updateFocusState();</span>
<span class="cstat-no" title="statement not covered" >            break;</span>
        }
      }
    });
&nbsp;
    /**
     * Update the state of the currently selected option.
     */
<span class="fstat-no" title="function not covered" >    function updateFocusState() {</span>
<span class="cstat-no" title="statement not covered" >      var event = void 0;</span>
&nbsp;
      // update states
<span class="cstat-no" title="statement not covered" >      currentOption.setAttribute('aria-selected', false);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      event = new CustomEvent('combobox-option-blurred', { detail: currentOption });</span>
<span class="cstat-no" title="statement not covered" >      root.dispatchEvent(event);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      currentOption = options[currentOptionIndex];</span>
<span class="cstat-no" title="statement not covered" >      currentOption.setAttribute('aria-selected', true);</span>
&nbsp;
      // only set active descendant if an option is selected (wrap focus will make
      // the text filed a focusable option)
<span class="cstat-no" title="statement not covered" >      combobox.setAttribute('aria-activedescendant', currentOption.id);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      event = new CustomEvent('combobox-option-focused', { detail: currentOption });</span>
<span class="cstat-no" title="statement not covered" >      root.dispatchEvent(event);</span>
    }
&nbsp;
    /**
     * Open the listbox.
     */
<span class="fstat-no" title="function not covered" >    function toggleListbox() {</span>
<span class="cstat-no" title="statement not covered" >      var event = void 0;</span>
&nbsp;
      // open listbox
<span class="cstat-no" title="statement not covered" >      if (combobox.getAttribute('aria-expanded') === 'false') {</span>
<span class="cstat-no" title="statement not covered" >        combobox.setAttribute('aria-expanded', true);</span>
<span class="cstat-no" title="statement not covered" >        listbox.setAttribute('aria-hidden', false);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        event = new CustomEvent('combobox-expanded');</span>
      }
      // close listbox
      else {
<span class="cstat-no" title="statement not covered" >          combobox.setAttribute('aria-expanded', false);</span>
<span class="cstat-no" title="statement not covered" >          listbox.setAttribute('aria-hidden', true);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >          event = new CustomEvent('combobox-collapsed');</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >      root.dispatchEvent(event);</span>
    }
  }
&nbsp;
  exports.combobox = combobox;
&nbsp;
  Object.defineProperty(exports, '__esModule', { value: true });
});</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sun Jun 18 2017 23:51:54 GMT-0600 (MDT)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
